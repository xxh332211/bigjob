define(["jquery","common","modals","distpicker"],function ($,common,modals,distpicker) {

    var alerts = modals.alerts;
    var select_func = {
        maindom: ".select",
        select_head: ".select .select_head",
        dropdown: ".select .select_dropdown",
        sel_single: ".select .select_dropdown ul li",
        toggle_drop: function (that) {
            $(that).siblings(select_func.dropdown).slideToggle("fast");
        },
        down_drop: function (that) {
            $(that).siblings(select_func.dropdown).slideDown('fast');
        },
        up_drop: function () {
            $(select_func.dropdown).slideUp("fast");
        },
        set_selected: function (that) {
            $(that).addClass('selected').siblings("li").removeClass('selected');
            var selec_text = $(that).find('span').html();

            var value = $(that).data("value");
            $(that).parents(".select").find(".select_head").html(selec_text);
            $(that).parents(".select").attr('data-value', value);
        },
        init: function () {
            $("body").on('click', select_func.select_head, function (event) {
                event.stopPropagation();
                var that = this;
                select_func.toggle_drop(that);
            });
            $("body").click(function (event) {
                /* Act on the event */
                select_func.up_drop();
            });
            $("body").on('click', select_func.sel_single, function (event) {
                var that = this;
                event.preventDefault();
                /* Act on the event */
                select_func.set_selected(that);
            });
        }
    };
    var chose_func = {
        row: ".main_part .row",
        box: ".main_part .row .chose_box",
        init: function () {
            $(chose_func.box).click(function(){
                $(this).addClass("selected").siblings().removeClass("selected");
            });
        }
    }
    var checkbox = {
        click_box: ".middle_part .checkbox_check",
        box: ".middle_part .checkbox",
        init: function () {
            $(checkbox.click_box).click(function(){
                var box = $(this).parents(checkbox.box);
                console.log(box);
                if(box.hasClass("selected")){
                    box.removeClass("selected");
                }else {
                    box.addClass("selected");
                }
            })
        }
    }

    //初始化设置
    var initarr = [select_func,chose_func,checkbox];
    var init = function (initarr) {
        for (var k in initarr){
            initarr[k].init();
        }
    }
    init(initarr);
})